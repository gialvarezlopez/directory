{% extends 'web/base.html.twig' %}

{% block title_page %}
    Home || Doctors Billboard
{% endblock %}

{% block classbg %}
    listing-with-map-page
{% endblock %}

{% block content %}

    <style type="text/css">
        .#footer {
            padding-right: 40%;
         }
         #intro_map{

            padding-top: 0px;

         }
    </style>

{#
<!-- Map -->
<section id="intro_map" class="section-padding">
	<div id="map-container" class="fullwidth-home-map">
    	<div id="map" data-map-zoom="9">
        	 <!-- map-here -->
        </div>
    	<div class="container">
    	<div class="search_form">
            	<form action="listing-grid-map.html" method="get">
                	<div class="form-group select">
                   		<select class="form-control">
                	    	<option>What are you looking for?</option>
            	            <option>Real Estate</option>
                            <option>Restaurant</option>
                            <option>Real Estate</option>
        	                <option>Health & Fitness</option>
    	                    <option>Beauty & Spas</option>
                            <option>Hotels & Travel</option>
                            <option>Automotive</option>
	                    </select>
                    </div>
                    <div class="form-group">
                   		<input type="text" class="form-control" placeholder="Locaton">
                    </div>
                    <div class="form-group search_btn">
                    	<input type="submit" value="Search" class="btn btn-block">
                    </div>
                </form>
            </div>
        </div>
	</div>
</section>
<!-- /Map -->
#}
<!-- Map -->
<section id="intro_map" class="section-padding intro_map_style2">
	<div id="map-container" class="fullwidth-home-map">
    	<div id="map" data-map-zoom="9">
        	 <!-- map-here -->
        </div>
        <div class="intro_search">
        	<div class="intro_search_content">
            	<h2>Find Your Destination</h2>
            	<div class="search_form">
                    <form action="listing-grid-map.html" method="get">

                        <div class="form-group select">
                            <select class="form-control">
                                <option>What are you looking for?</option>
                                <option>Real Estate</option>
                                <option>Restaurant</option>
                                <option>Real Estate</option>
                                <option>Health & Fitness</option>
                                <option>Beauty & Spas</option>
                                <option>Hotels & Travel</option>
                                <option>Automotive</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Location">
                        </div>
                        <div class="form-group search_btn">
                            <input type="submit" value="Search" class="btn btn-block">
                        </div>
                    </form>
                </div>
            </div>

        </div>


	</div>
</section>

<!-- Category-Slider-Style-2 -->
<section id="listing_category" class="section-padding">
	<div class="container">
    	<div class="section-header text-center">
        	<h2>What are you interested in? </h2>
            <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry.
            Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer.</p>
        </div>
    	<div id="category_slider2">
        	<div class="owl-carousel owl-theme">
            	<div class="item" style="background-image:url(assets/images/400x530.jpg);">
                	<a href="#">
    	            	<div class="category_icon">
                        	<span class="category_listing_n">20</span>
                            <img src="assets/images/category-icon1.png" alt="image">
                        </div>
	                    <p>Real Estate</p>
                    </a>
                </div>

                <div class="item" style="background-image:url(assets/images/400x530.jpg);">
                	<a href="#">
    	            	<div class="category_icon">
                        	<span class="category_listing_n">32</span>
                            <img src="assets/images/category-icon2.png" alt="image">
                        </div>
	                    <p>Restaurant</p>
                    </a>
                </div>

                <div class="item" style="background-image:url(assets/images/400x530.jpg);">
                	<a href="#">
    	            	<div class="category_icon">
                        	<span class="category_listing_n">18</span>
                            <img src="assets/images/category-icon3.png" alt="image">
                        </div>
	                    <p>Health & Fitness</p>
                    </a>
                </div>

                <div class="item" style="background-image:url(assets/images/400x530.jpg);">
                	<a href="#">
    	            	<div class="category_icon">
                        	<span class="category_listing_n">15</span>
                            <img src="assets/images/category-icon4.png" alt="image">
                        </div>
                        <p>Beauty & Spas</p>
                    </a>
                </div>

                <div class="item" style="background-image:url(assets/images/400x530.jpg);">
                	<a href="#">
    	            	<div class="category_icon">
                        	<span class="category_listing_n">15</span>
                            <img src="assets/images/category-icon5.png" alt="image">
                        </div>
                        <p>Hotels & Travel</p>
                    </a>
                </div>

                <div class="item" style="background-image:url(assets/images/400x530.jpg);">
                	<a href="#">
    	            	<div class="category_icon">
                        	<span class="category_listing_n">32</span>
                            <img src="assets/images/category-icon6.png" alt="image">
                        </div>
	                    <p>Automotive</p>
                    </a>
                </div>

                <div class="item" style="background-image:url(assets/images/400x530.jpg);">
                	<a href="#">
    	            	<div class="category_icon">
                        	<span class="category_listing_n">10</span>
                            <img src="assets/images/category-icon7.png" alt="image">
                        </div>
	                    <p>Event</p>
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- /Category-Slider-Style-2 -->


<!-- How-it-Work -->
<section id="how_it_work" class="section-padding parallex-bg">
	<div class="container">
    	<div class="section-header text-center white-text div_zindex">
        	<h2>Find Quick and Easy</h2>
            <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry.
            Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer.</p>
        </div>

        <div class="row">
        	<div class="col-md-4">
            	<div class="steps_wrap">
                	<div class="icon_div">
                    	<i class="fa fa-map-marker"></i>
                    </div>
                	<h5>Choose a location</h5>
                    <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</p>
                </div>
            </div>

            <div class="col-md-4">
            	<div class="steps_wrap">
                	<div class="icon_div">
                    	<i class="fa fa-location-arrow"></i>
                    </div>
                	<h5>Pick a category</h5>
                    <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</p>
                </div>
            </div>

            <div class="col-md-4">
            	<div class="steps_wrap">
                	<div class="icon_div">
                    	<i class="fa fa-smile-o"></i>
                    </div>
                	<h5>Find what you want</h5>
                    <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</p>
                </div>
            </div>
        </div>
    </div>
	<div class="dark-overlay"></div>
</section>
<!-- /How-it-Work -->

<!-- Featured-Listings -->
<section id="featured_listings" class="section-padding">
	<div class="container">
    	<div class="section-header text-center">
        	<h2>Featured Listings</h2>
            <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s.</p>
        </div>

        <div id="popular_listing_slider">
        	<div class="owl-carousel owl-theme">
                <div class="listing_wrap">
                    <div class="listing_img">
                        <span class="like_post"><i class="fa fa-bookmark-o"></i></span>
                        <div class="listing_cate">
                            <span class="cate_icon"><a href="#"><img src="assets/images/category-icon1.png" alt="icon-img"></a></span>
                            <span class="listing_like"><a href="#"><i class="fa fa-heart-o"></i></a></span>
                        </div>
                        <a href="#"><img src="assets/images/800x530.jpg" alt="image"></a>
                    </div>
                    <div class="listing_info">
                        <div class="post_category">
                            <a href="#">Real Estate</a>
                        </div>
                        <h4><a href="#">The Morning Hotel</a></h4>
                        <p>5-star hotel with restaurant, Deluxe Rooms.</p>

                        <div class="listing_review_info">
                            <p><span class="review_score">4.0/5</span>
                               <i class="fa fa-star active"></i> <i class="fa fa-star active"></i> <i class="fa fa-star active"></i>
                               <i class="fa fa-star active"></i> <i class="fa fa-star"></i>
                               (5 Reviews) </p>
                            <p class="listing_map_m"><i class="fa fa-map-marker"></i> Los Angeles</p>
                        </div>
                    </div>
                </div>

                <div class="listing_wrap">
                    <div class="listing_img">
                        <span class="like_post"><i class="fa fa-bookmark-o"></i></span>
                        <div class="listing_cate">
                            <span class="cate_icon"><a href="#"><img src="assets/images/category-icon2.png" alt="icon-img"></a></span>
                            <span class="listing_like"><a href="#"><i class="fa fa-heart-o"></i></a></span>
                        </div>
                        <a href="#"><img src="assets/images/800x530.jpg" alt="image"></a>
                    </div>
                    <div class="listing_info">
                        <div class="post_category">
                            <a href="#">Restaurant</a>
                        </div>
                        <h4><a href="#">Eating Restaurant</a></h4>
                        <p>5-star hotel with restaurant, Deluxe Rooms.</p>

                        <div class="listing_review_info">
                            <p><span class="review_score">4.0/5</span>
                               <i class="fa fa-star active"></i> <i class="fa fa-star active"></i> <i class="fa fa-star active"></i>
                               <i class="fa fa-star active"></i> <i class="fa fa-star"></i>
                               (5 Reviews) </p>
                            <p class="listing_map_m"><i class="fa fa-map-marker"></i> Los Angeles</p>
                        </div>
                    </div>
                </div>

                <div class="listing_wrap">
                    <div class="listing_img">
                        <span class="like_post"><i class="fa fa-bookmark-o"></i></span>
                        <div class="listing_cate">
                            <span class="cate_icon"><a href="#"><img src="assets/images/category-icon4.png" alt="icon-img"></a></span>
                            <span class="listing_like"><a href="#"><i class="fa fa-heart-o"></i></a></span>
                        </div>
                        <a href="#"><img src="assets/images/800x530.jpg" alt="image"></a>
                    </div>
                    <div class="listing_info">
                        <div class="post_category">
                            <a href="#">Beauty & Spas</a>
                        </div>
                        <h4><a href="#">The Morning Hotel</a></h4>
                        <p>5-star hotel with restaurant, Deluxe Rooms.</p>

                        <div class="listing_review_info">
                            <p><span class="review_score">4.0/5</span>
                               <i class="fa fa-star active"></i> <i class="fa fa-star active"></i> <i class="fa fa-star active"></i>
                               <i class="fa fa-star active"></i> <i class="fa fa-star"></i>
                               (5 Reviews) </p>
                            <p class="listing_map_m"><i class="fa fa-map-marker"></i> Los Angeles</p>
                        </div>
                    </div>
                </div>

                <div class="listing_wrap">
                    <div class="listing_img">
                        <span class="like_post"><i class="fa fa-bookmark-o"></i></span>
                        <div class="listing_cate">
                            <span class="cate_icon"><a href="#"><img src="assets/images/category-icon2.png" alt="icon-img"></a></span>
                            <span class="listing_like"><a href="#"><i class="fa fa-heart-o"></i></a></span>
                        </div>
                        <a href="#"><img src="assets/images/800x530.jpg" alt="image"></a>
                    </div>
                    <div class="listing_info">
                        <div class="post_category">
                            <a href="#">Restaurant</a>
                        </div>
                        <h4><a href="#">Blue Restaurant</a></h4>
                        <p>5-star hotel with restaurant, Deluxe Rooms.</p>

                        <div class="listing_review_info">
                            <p><span class="review_score">4.0/5</span>
                               <i class="fa fa-star active"></i> <i class="fa fa-star active"></i> <i class="fa fa-star active"></i>
                               <i class="fa fa-star active"></i> <i class="fa fa-star"></i>
                               (5 Reviews) </p>
                            <p class="listing_map_m"><i class="fa fa-map-marker"></i> Los Angeles</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
</section>
<!-- /Featured-Listings -->

<!-- Pricing-Table -->
<section id="pricing_table" class="section-padding parallex-bg">
	<div class="container">
    	<div class="section-header white-text div_zindex text-center">
        	<h2>Listing Packages</h2>
            <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry.
            Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer.</p>
        </div>

        <div class="row">
        	<div class="col-md-4">
            	<div class="pricing_wrap">
                	<div class="pricing_header">
                    	<h2>Basic</h2>
                        <p>At vero eos et accusamus et iusto odio dignissimos ducimus qui blanditiis</p>
                    </div>
                    <div class="plan_info">
                    	<div class="plan_price">Free</div>
                        <ul>
                        	<li><span>One</span> Listing</li>
                            <li><span>30 Days </span> Availability</li>
                            <li><span>Standard </span> Listing</li>
                            <li><span>Limited </span> Support</li>
                        </ul>
                        <a href="#" class="btn">Get Started</a>
                    </div>
                </div>
            </div>

            <div class="col-md-4">
            	<div class="pricing_wrap active">
                	<div class="pricing_header">
                    	<p class="popular_plan">Most Popular</p>
                    	<h2>Professional</h2>
                        <p>At vero eos et accusamus et iusto odio dignissimos ducimus qui blanditiis</p>
                    </div>
                    <div class="plan_info">
                    	<div class="plan_price">$5.00</div>
                        <ul>
                        	<li><span>10</span> Listing</li>
                            <li><span>90 Days </span> Availability</li>
                            <li><span>Standard </span> Listing</li>
                            <li><span>24/7 </span> Support</li>
                        </ul>
                        <a href="#" class="btn">Get Started</a>
                    </div>
                </div>
            </div>

            <div class="col-md-4">
            	<div class="pricing_wrap">
                	<div class="pricing_header">
                    	<h2>Business</h2>
                        <p>At vero eos et accusamus et iusto odio dignissimos ducimus qui blanditiis</p>
                    </div>
                    <div class="plan_info">
                    	<div class="plan_price">$16.00</div>
                        <ul>
                        	<li><span>Unlimited</span> Listing</li>
                            <li><span>Unlimited Days </span> Availability</li>
                            <li><span>Featured</span> Listing</li>
                            <li><span>24/7 </span> Support</li>
                        </ul>
                        <a href="#" class="btn">Get Started</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
	<div class="dark-overlay"></div>
</section>
<!-- /Pricing-Table -->

<!-- Latest-Blog -->
<section id="latest_blog" class="section-padding">
	<div class="container">
    	<div class="section-header text-center">
        	<h2>Latest Articles and Tips</h2>
            <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer.</p>
        </div>

        <div class="row">
        	<div class="col-md-4">
            	<div class="post_wrap">
                	<div class="post_img">
                    	<a href="#"><img src="assets/images/800x530.jpg" alt="image"></a>
                    </div>
                    <div class="post_info">
                    	<div class="post_category">
                        	<a href="#">Beauty & Spas</a>
                        </div>
                    	<h4><a href="#">The Standard Chunk.</a></h4>
                        <p>Contrary to popular belief, Lorem Ipsum is not simply random text.</p>
                        <div class="post_meta">
                        	<p>By: <a href="#">ElemoListing</a></p>
                            <p>On: <a href="#">22 March, 2017</a></p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-4">
            	<div class="post_wrap">
                	<div class="post_img">
                    	<a href="#"><img src="assets/images/800x530.jpg" alt="image"></a>
                    </div>
                    <div class="post_info">
                    	<div class="post_category">
                        	<a href="#">Restaurant</a>
                        </div>
                    	<h4><a href="#">There are many variations.</a></h4>
                        <p>Contrary to popular belief, Lorem Ipsum is not simply random text.</p>
                        <div class="post_meta">
                        	<p>By: <a href="#">ElemoListing</a></p>
                            <p>On: <a href="#">22 March, 2017</a></p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-4">
            	<div class="post_wrap">
                	<div class="post_img">
                    	<a href="#"><img src="assets/images/800x530.jpg" alt="image"></a>
                    </div>
                    <div class="post_info">
                    	<div class="post_category">
                        	<a href="#">Real Estate</a>
                        </div>
                    	<h4><a href="#">All the Lorem Ipsum.</a></h4>
                        <p>Contrary to popular belief, Lorem Ipsum is not simply random text.</p>
                        <div class="post_meta">
                        	<p>By: <a href="#">ElemoListing</a></p>
                            <p>On: <a href="#">22 March, 2017</a></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="text-center">
        	<a href="#" class="btn">Read More Articles</a>
        </div>

    </div>
</section>
<!-- /Latest-Blog -->



{% endblock %}

{% block codejs %}


    <script>

    $(function () {



    });

    $(function () {

            /*-------------------------------------------------------------------------------
        Googl-Map
    -------------------------------------------------------------------------------*/

            function GooglMap() {

                var ib = new InfoBox();
                var test = ""; //{# {{ (medic.items|json_encode|raw) }}; #}

                $(document).ready(function () {
                    $(".searchProfile").click(function () {

                        listing_map_m($(this).attr('id'), $(this).attr('name'));
                    });

                });

                function listing_map_m(lat, lng) {
                    search(lat, lng);
                }

                function locationData(locationURL, locationImg, locationTitle, locationAddress, locationRating, locationRatingCounter) {
                    return ('' + '<div class="map-popup-close"><i class="fa fa-times"></i></div>' + '<hr><a href="' + locationURL + '" class="map-post-thumb-m" target="_blank">' + '<img src="' + locationImg + '" width="100%" height="" alt="">' + '</a>' + '<div class="map-post-des-m">' + '<h5>' + '<a href="' + locationURL + '" target="_blank">' + locationTitle + '</a>' + '</h5>' + '<span><i class="fa fa-phone"></i> ' + locationAddress + '</span>' + '</div>' + '<div class="listing-content">' + '</div>')
                }
                var locations = [];

                $.each(test, function (k, v) {
                    locations.push([
                        locationData('showProfile/' + v.usr_id, '{{ asset(' uploads / ') }}' + v.md_profile_image, v.md_first_name + ' ' + v.md_first_surname, v.ci_phone1, '5.0', '23'),
                        v.ci_lat,
                        v.ci_lng,
                        2,
                        '<i class="im-icon"><img src="{{ asset('bundles/web/template/Site/assets/images/doctor.jpg') }} "></i>'
                    ])
                })

                var mapZoomAttr = $('#map').attr('data-map-zoom');

                if (typeof mapZoomAttr !== typeof undefined && mapZoomAttr !== false) {
                    var zoomLevel = parseInt(mapZoomAttr);
                } else {
                    var zoomLevel = 9;
                }

                {# //if  ({{ zoom  }} == 1)  #}
                if (1) {
                   // console.log(3);
                    var map = new google.maps.Map(document.getElementById('map'), {
                        zoom: 6,
                        scrollwheel: true,
                        disableDefaultUI: true,
                        {% if estados_d[0].sta_lat is defined and estados_d[0].sta_lng is defined %}
                            center: new google.maps.LatLng({{ estados_d[0].sta_lat }}, {{ estados_d[0].sta_lng }}),
                        {% else %}
                            center: new google.maps.LatLng(-14.5822, 1.45236),
                        {% endif %}

                        mapTypeId: google.maps.MapTypeId.ROADMAP,
                        zoomControl: false,
                        mapTypeControl: false,
                        scaleControl: false,
                        panControl: false,
                        fullscreenControl: false,
                        navigationControl: false,
                        streetViewControl: false,
                        animation: google.maps.Animation.BOUNCE,
                        gestureHandling: 'cooperative',
                        styles: [
                            {
                                "featureType": "administrative",
                                "elementType": "labels.text.fill",
                                "stylers": [
                                    {
                                        "color": "#444444"
                                    }
                                ]
                            }
                        ]
                    });
                } else {

                    var map = new google.maps.Map(document.getElementById('map'), {
                        zoom: zoomLevel,
                        scrollwheel: true,
                        center: new google.maps.LatLng(38.46581101942668, -97.67327016328125),
                        mapTypeId: google.maps.MapTypeId.ROADMAP,
                        zoomControl: false,
                        mapTypeControl: false,
                        scaleControl: false,
                        panControl: false,
                        fullscreenControl: false,
                        navigationControl: false,
                        streetViewControl: false,
                        animation: google.maps.Animation.BOUNCE,
                        gestureHandling: 'cooperative',
                        styles: [
                            {
                                "featureType": "administrative",
                                "elementType": "labels.text.fill",
                                "stylers": [
                                    {
                                        "color": "#444444"
                                    }
                                ]
                            }
                        ]
                    });
                }

                var boxText = document.createElement("div");
                boxText.className = 'map-box'
                var currentInfobox;
                var boxOptions = {
                    content: boxText,
                    disableAutoPan: true,
                    alignBottom: true,
                    maxWidth: 0,
                    pixelOffset: new google.maps.Size(-145, -45),
                    zIndex: null,
                    boxStyle: {
                        width: "260px"
                    },
                    closeBoxMargin: "0",
                    closeBoxURL: "",
                    infoBoxClearance: new google.maps.Size(1, 1),
                    isHidden: false,
                    pane: "floatPane",
                    enableEventPropagation: false
                };
                var markerCluster,
                    overlay,
                    i;
                var allMarkers = [];
                var clusterStyles = [
                    {
                        textColor: 'white',
                        url: '',
                        height: 50,
                        width: 50
                    }
                ];

                var markerIco;
                for (i = 0; i < locations.length; i++) {
                    markerIco = locations[i][4];
                    //alert(locations[i][0]);
                    var overlaypositions = new google.maps.LatLng(locations[i][1], locations[i][2]),
                        overlay = new CustomMarker(overlaypositions, map, {
                            marker_id: i
                        }, markerIco);
                    allMarkers.push(overlay);
                    var ib = new InfoBox();
                    //console.log(allMarkers);
                    google.maps.event.addListener(overlay, 'click', (function (overlay, i) {
                        return function () {
                            ib.setOptions(boxOptions);
                            boxText.innerHTML = locations[i][0];
                            ib.close();
                            ib.open(map, overlay);
                            currentInfobox = overlay.id;
                            var latLng = new google.maps.LatLng(locations[i][1], locations[i][2]);
                            map.panTo(latLng);
                            map.panBy(0, -180);
                            google.maps.event.addListener(ib, 'domready', function () {
                                $('.map-popup-close').click(function (e) {
                                    e.preventDefault();
                                    ib.close();
                                });
                            });
                        }
                    })(overlay, i));
                }

                var options = {
                    imagePath: 'images/',
                    styles: clusterStyles,
                    minClusterSize: 2
                };

                // Agrupar marker cercanos
                markerCluster = new MarkerClusterer(map, allMarkers, options);
                google.maps.event.addDomListener(window, "resize", function () {
                    var center = map.getCenter();
                    google.maps.event.trigger(map, "resize");
                    map.setCenter(center);
                });

                $('.nextmap-nav').click(function (e) {
                    e.preventDefault();
                    map.setZoom(9);
                    var index = currentInfobox;
                    if (index + 1 < allMarkers.length) {
                        google.maps.event.trigger(allMarkers[index + 1], 'click');
                    } else {
                        google.maps.event.trigger(allMarkers[0], 'click');
                    }
                });

                $('.prevmap-nav').click(function (e) {
                    e.preventDefault();
                    map.setZoom(9);
                    if (typeof(currentInfobox) == "undefined") {
                        google.maps.event.trigger(allMarkers[allMarkers.length - 1], 'click');
                    } else {
                        var index = currentInfobox;
                        if (index - 1 < 0) {
                            google.maps.event.trigger(allMarkers[allMarkers.length - 1], 'click');
                        } else {
                            google.maps.event.trigger(allMarkers[index - 1], 'click');
                        }
                    }
                });

                var zoomControlDiv = document.createElement('div');
                var zoomControl = new ZoomControl(zoomControlDiv, map);

                function ZoomControl(controlDiv, map) {
                    zoomControlDiv.index = 1;
                    map.controls[google.maps.ControlPosition.RIGHT_TOP].push(zoomControlDiv);
                    controlDiv.className = "leaflet-control-zoom";
                    var controlWrapper = document.createElement('div');
                    controlDiv.appendChild(controlWrapper);
                    var zoomInButton = document.createElement('div');
                    zoomInButton.className = "custom-zoom-in";
                    controlWrapper.appendChild(zoomInButton);
                    var zoomOutButton = document.createElement('div');
                    zoomOutButton.className = "custom-zoom-out";
                    controlWrapper.appendChild(zoomOutButton);
                    google.maps.event.addDomListener(zoomInButton, 'click', function () {
                        map.setZoom(map.getZoom() + 1);
                    });
                    google.maps.event.addDomListener(zoomOutButton, 'click', function () {
                        map.setZoom(map.getZoom() - 1);
                    });
                }

                $("#geoLocation, .input-with-icon.location a").click(function (e) {
                    e.preventDefault();
                    geolocate();
                });

                function geolocate() {
                    if (navigator.geolocation) {
                        navigator.geolocation.getCurrentPosition(function (position) {
                            var pos = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
                            map.setCenter(pos);
                            map.setZoom(12);
                        });
                    }
                }
                if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
                    map.setOptions({draggable: false});
                }
            }

            var map = document.getElementById('map');
            if (typeof(map) != 'undefined' && map != null) {
                google.maps.event.addDomListener(window, 'load', GooglMap);
                google.maps.event.addDomListener(window, 'resize', GooglMap);
            }

            function singlemap() {

                var myLatlng = new google.maps.LatLng({lng: $('#singlemap').data('longitude'), lat: $('#singlemap').data('latitude')});

                var single_map = new google.maps.Map(document.getElementById('singlemap'), {
                    zoom: 15,
                    center: myLatLng,
                    scrollwheel: false,
                    zoomControl: false,
                    mapTypeControl: false,
                    scaleControl: false,
                    panControl: false,
                    navigationControl: false,
                    streetViewControl: false,
                    styles: [
                        {
                            "featureType": "landscape",
                            "elementType": "all",
                            "stylers": [
                                {
                                    "color": "#f2f2f2"
                                }
                            ]
                        }
                    ]
                });

                var marker = new google.maps.Marker({position: myLatLng, map: single_map, icon: markerIcon, title: 'Our Location'});

                var zoomControlDiv = document.createElement('div');
                var zoomControl = new ZoomControl(zoomControlDiv, single_map);

                function ZoomControl(controlDiv, single_map) {
                    zoomControlDiv.index = 1;
                    single_map.controls[google.maps.ControlPosition.RIGHT_TOP].push(zoomControlDiv);
                    var controlWrapper = document.createElement('div');
                    controlDiv.appendChild(controlWrapper);
                    var zoomInButton = document.createElement('div');
                    zoomInButton.className = "custom-zoom-in";
                    controlWrapper.appendChild(zoomInButton);
                    var zoomOutButton = document.createElement('div');
                    zoomOutButton.className = "custom-zoom-out";
                    controlWrapper.appendChild(zoomOutButton);
                    google.maps.event.addDomListener(zoomInButton, 'click', function () {
                        single_map.setZoom(single_map.getZoom() + 1);
                    });
                    google.maps.event.addDomListener(zoomOutButton, 'click', function () {
                        single_map.setZoom(single_map.getZoom() - 1);
                    });
                }
                var singleMapIco = "<i class='im-icon'><img src='" + $('#singlemap').data('map-icon') + "'></i>";
                new CustomMarker(myLatlng, single_map, {
                    marker_id: '1'
                }, singleMapIco);
            }

            var single_map = document.getElementById('singlemap');
            if (typeof(single_map) != 'undefined' && single_map != null) {
                google.maps.event.addDomListener(window, 'load', singlemap);
                google.maps.event.addDomListener(window, 'resize', singlemap);
            }

            function CustomMarker(latlng, map, args, markerIco) {
                this.latlng = latlng;
                this.args = args;
                this.markerIco = markerIco;
                this.setMap(map);
            }

            CustomMarker.prototype = new google.maps.OverlayView();
            CustomMarker.prototype.draw = function () {
                var self = this;
                var div = this.div;
                if (!div) {
                    div = this.div = document.createElement('div');
                    div.className = 'map-marker-container';
                    div.innerHTML = '<div class="marker-container">' + '<div class="marker-card">' + '<div class="front face">' + self.markerIco + '</div>' + self.markerIco + '</div>' + '</div>' + '</div>'
                    google.maps.event.addDomListener(div, "click", function (event) {
                        $('.map-marker-container').removeClass('clicked infoBox-opened');
                        google.maps.event.trigger(self, "click");
                        $(this).addClass('clicked infoBox-opened');
                    });
                    if (typeof(self.args.marker_id) !== 'undefined') {
                        div.dataset.marker_id = self.args.marker_id;
                    }
                    var panes = this.getPanes();
                    panes.overlayImage.appendChild(div);
                }
                var point = this.getProjection().fromLatLngToDivPixel(this.latlng);
                if (point) {
                    div.style.left = (point.x) + 'px';
                    div.style.top = (point.y) + 'px';
                }
            };

            CustomMarker.prototype.remove = function () {
                if (this.div) {
                    this.div.parentNode.removeChild(this.div);
                    this.div = null;
                    $(this).removeClass('clicked');
                }
            };
            CustomMarker.prototype.getPosition = function () {
                return this.latlng;
            };


        });
</script>
{% endblock %}